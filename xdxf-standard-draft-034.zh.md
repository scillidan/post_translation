# [XDXF标准；草稿034；2022年1月19日](https://github.com/soshial/xdxf_makedict/tree/master/format_standard)

## 引言

XDXF代表_ XML字典交换格式_，并指定了一种**语义**格式用于存储字典。

该格式对所有人都是**开放和免费**使用的。欢迎对其进一步开发和推广感兴趣的任何人加入[Github](https://github.com/soshial/xdxf_makedict/)。如果您需要将XDXF格式进行转换的帮助，可以在[XDXF Google组](https://groups.google.com/forum/#!forum/xdxf-format)或其他[转换器](https://github.com/ilius/pyglossary)页面询问。

XDXF文件的MIME类型为`application/x-xdxf+xml`。

XDXF的**主要区别**在于，它几乎不包含有关条目外观的任何表现信息。相反，XDXF仅在词条中存储结构和语义信息。如何呈现这些信息的选择则转移到字典浏览软件（“DS”）、其设置和用户偏好。这可能帮助用户调整布局、缩进、文本颜色，隐藏示例或同义词以避免混淆视图等。此外，该格式具有许多特定于字典的标签：词源、详尽的语义关系、语法和风格部分，以及标记、文章间和文章内链接、单词类别/类及其他。该格式不仅对普通用途有用，还可能用于科学目的。更不用说现有的丰富字典格式，XDXF可能是一个统一的字典交换格式。
有关该格式优点的更多信息，请考虑阅读文章“[为什么XDXF更好？](https://github.com/soshial/xdxf_makedict/wiki/Why-is-XDXF-better%3F)”。

对于反对使用XML存储字典的人以及在RAM中存储和解析大型XML文件的问题，XDXF架构和任何字典的结构允许使用哈希表将所有词条存储在磁盘上。一些字典软件对此方法运用得相当高效（例如，参见[GoldenDict](http://goldendict.org/)）。尽管目前没有允许编辑字典的软件，XDXF是一种比较人性化的可读XML，即使没有提前了解格式规范也很容易在文本编辑器中手动编辑。

### 更新日志

#### 版本34（2022年1月19日）

* 自版本34以来，该格式仅包含语义信息，不能存储任何表现或视觉数据
* 语言代码不再有限制：现在支持BCP47标准中的所有语言（所有[注册子标签](https://www.iana.org/assignments/lang-subtags-templates/lang-subtags-templates.xhtml)，使用https://schneegans.de/lv/?tags=hy-Latn-IT-arevela进行验证）
* 现在支持多语言字典：字典可以有多种语言，可以相互翻译。还允许用`xml:lang`标记`<k>`和`<def>`标签
* 描述支持换行
* 转录信息可以直接放在`def`标签内

#### 版本33（2017年10月15日）

* 为了修复DTD方案中的多个错误，引入了`<deftext>`
* `<rref>`标签：添加了`lctn`和`type`属性，链接不再存储在标签内
* `<kref>`标签：引入了`idref`属性
* `<c>`标签：在属性中添加了必要的哈希符号#
* `<categ>`标签现在是一个`<kref>`标签的列表
* `<etm>`现在可以在其中添加`<mrkd>`以标记词源祖先/同源词
* `<dtrn>`现在可以包含`<kref>`标签
* 引入了用于下划线文本的`<u>`标签
* 为了在文章中包含换行，引入了`<br/>`标签
* `<ex>`现在可以内部包含`<iref>`标签
* `<ex>`、`<tr>`、`<co>`标签现在可以拥有用户设置的属性值

#### 版本32（2013年6月9日）

* `<phr>`标签被移除，因为它已在`<ex>`中存在
* `<abr_def>`标签：引入了属性`type`
* `<xdxf>`有了新的必选属性：文档所遵循的格式标准的`revision`（版本）
* 现不再推荐视觉格式
* `<file_ver>`、`<creation_date>`被定义为必填元信息
* 示例现在符合格式规范（感谢@lastivka）
* `<categ>`标签引入
* `<ex>`标签`type`属性现在可以取值`oth`；引入了`mrkd`标签，增加了`source`和`author`属性
* `<kref>`标签：引入了`kcmt`属性
* `<def>`标签：`id`属性区分大小写（如同HTML）

#### 版本31（2012年5月29日）

* 引入了`<meta_info>`、`<lexicon>`，以简化字典文件的结构
* 语义关系部分进行了改造，以减少标签数量
* 增加了定义使用频率属性
* 短语（也称为短语学）移入`<ex>`部分；同时为`<ex>`添加了谚语
* 文件版本和日期、字典版本和日期、字典来源URL已添加至`<meta_info>`

#### 版本30（2012年1月29日）

* 重命名`<abr_def>` -> `<abbr_def>`
* 之前，`<k>`意味着不同的事物：文章键和缩写键。现在使用`<k>`和`<abbr_k>`，`<v>` -> `<abbr_v>`
* 添加了两种模式（erkIPA和X-SAMPA）用于转录
* `<def>`不再是可选的；可能有一个`id`属性
* `<ex>`现在扩展为`<ex_main>`和`<ex_transl>`
    (```<ex>
        <exfrom>他杀了金！</exfrom>
        <exto>he killed him!</exto>
        <exto>он убил его!</exto>
    </ex>```)
* 引入了`<syn>`、`<ant>`、`<hpr>`、`<hpn>`、`<par>`、`<spv>`、`<mer>`、`<hol>`、`<ent>`、`<rel>`、`<etm>`、`<phr>`

#### 版本29（2011年9月27日）

* 删除了`<su>`标签：为此应使用嵌套的`<def>`
* 合并了`<pos>`和`<tense>`成一个通用语法标签`<gr>`
* 将`<full_name>`重命名为`<full_title>`；添加了`<title>`
* 将`<abr>`重命名为`<abbr>`
* 添加了`<publisher>`和`<authors>`标签
* `<tt>`被弃用（使用率低，几乎不为人知，孤立的老html标签）
* 删除了`<nu>`（未使用）标签（因为它违反了xml，所有表现标签应由字典软件自动剥离；
* 引入了必要标签“dont-index"，用于标记文本（而不是标签）以从索引中省略

### 已知的局限性：

* 许多字典创建者希望XDXF支持其语言的一些特定语法形式。不幸的是，所有可能的语法形式无法以如此简洁的格式如XDXF进行形式化。此外，支持包含语法形式的表可能会使格式过于复杂。因此，我们退回到纯文本的语法信息。
* 目前不支持表格。请使用图像来实现。

## 格式描述

### 文件结构

每个字典位于其自己的文件夹中，文件夹的名称用作ID，必须仅包含拉丁字符，并且不得包含空格或其他特殊字符。因此，如果字典名称为“1913年出版的韦伯斯特全解字典”，则文件夹名称应为“Webster1913”。字典文件本身始终为“dict.xdxf”。建议每个字典有一套工具栏图标和一个大图标用于首页。图标的大小应为：16x16、32x32、512x512。文件名应分别为icon16.png、icon32.png和icon512.png。
请注意，所有文件名区分大小写。

所有XDXF字典文本文件（.xdxf扩展名）均为XML格式，并且使用任何Unicode编码（通常是UTF-8）。
严格禁止使用任何非Unicode编码。

### 标签和结构：

`<xdxf revision="DD">`是**根元素**。`revision`属性指定XDXF文件的格式标准的确切版本。必选。

文件结构分为两部分：`<meta_info>`和`<lexicon>`：
```xml
<xdxf revision="34">
    <meta_info>
        字典的所有元信息：其标题、作者等。
    </meta_info>
    <lexicon>
        <ar>条目1</ar>
        <ar>条目2</ar>
        <ar>条目3</ar>
        <ar>条目4</ar>
        ...
    </lexicon>
</xdxf>
```

1. `<meta_info>`是所有字典的元信息的容器。包含：
    1. `<title>` 字典的短标题（以便可以适应小屏幕并在列表中显示良好）。示例：“牛津英语-阿拉伯语”或“牛津图画字典（英-俄）”
    2. `<full_title>` 字典的全名，像在书封面上出现的那样。示例：“牛津高级学习者词典第8版”或“牛津图画字典英语-俄语：面向讲俄语的青少年和成人英语学习者的双语字典（牛津图画字典2E）”
        *提示*：它可以包含多种语言的标题或多个标题。
    3. `<publisher>` 字典的正式出版商；可选。
    4. `<authors>` 包含一系列`<author>`标签，表示所有参与制作字典的人（组织）：词典编纂者、校对人员、程序员等。可选。
        * `<author role="xxx">` 每个作者一个标签。

        *提示*：一些作者可能有>1个角色；在这种情况下，应该使用多个`<author>`标签列出他们。
    5. `<description>` 字典的描述，可以是自由表达或出版商的注释/摘要/读者说明。
        建议包含以下内容：版权、许可证、该文件可以下载的来源、该原始未格式化文件（即转换为XDXF格式之前的原始字典文件）可以下载的来源、该原始未格式化字典文件的获取来源，以及用于将原始未格式化字典文件转换为XDXF的脚本的链接。描述可以包含在XDXF中允许的XHTML标签（下面指定）。
    6. `<abbreviations>`部分包含一系列`<abbr_def>`标签。包含字典中用于标签的所有缩写
        （例如，语法标签）。`<abbr_def>`标签定义了一个缩写并包含两个不同的标签：
        * `<abbr_k>`（代表缩写键）：缩写文本。
        * `<abbr_v>`（代表值）：完整文本，缩写描述，当您悬停在其上时将显示。

        `<abbr_def>`可以包含`type`属性，说明这个缩写标签的类型：
        * `<abbr_def type="grm">` — 指定单词的语法特征（名词、过去分词等）
        * `<abbr_def type="stl">` — 单词的风格特性（粗俗的、古老的、过时的、诗意的、不赞成的等）
        * `<abbr_def type="knl">` — 知识领域/专业（计算机、文学、烹饪、排版等）
        * `<abbr_def type="aux">` — 简单的附属词如（“例如”、“即”、“比较”、“也”、“罕见”等）。
        * `<abbr_def type="oth">` — 其他

        *注意！*请注意，每个缩写定义可以在每个`<abbr_def>`中包含多个`<abbr_k>`以指定同义词，例如“Ave。”和“Av.”，但`<abbr_v>`标签只能为一个。
        ```xml
        <abbreviations>
            <abbr_def type="grm"><abbr_k>n.</abbr_k><abbr_v>名词</abbr_v></abbr_def>
            <abbr_def type="knl"><abbr_k>polit.</abbr_k><abbr_v>政治</abbr_v></abbr_def>
            <abbr_def><abbr_k>Av.</abbr_k><abbr_k>Ave.</abbr_k><abbr_v>林荫道</abbr_v></abbr_def>
        </abbreviations>
        ```
    7. `<file_ver>`、`<creation_date>`是必填信息。
        `<last_edited_date>`、`<dict_edition>`、`<publishing_date>`、`<dict_src_url>`是可选的元信息。
        所有日期应格式化为`DD-MM-YYYY`。当日期不完全已知时，应使用零：05-00-2011。
    8. `languages`标签列出了此字典中使用的哪些语言。`from`子标签列出表示关键短语（`<k>`）的语言。`to`子标签列出表示定义（`<def>`）的语言。

2. `<lexicon>`是所有`<ar>`（条目）标签的容器。`<ar>`标签将与一个关键短语相关的一切组合在一起。

    在`<ar></ar>`标签中允许的标签如下：
    1. `<k>` 一条“关键短语”，写在`<k>`标签内，是一个字母/表意文字序列，其对应的单词条目标识符。
        每个条目可以包含多个关键短语，但始终至少包含一个。如果有多个`<k>`，DS必须显示所有分配给该条目的关键短语，无论用户在查找哪个关键短语。DS的开发者应确保能够方便地搜索所有密钥（不考虑重音符、通配符等）。
        *注意*，如果由于关键短语无法将两个条目合并为一个条目，则可能会有多个具有相同关键短语的不同条目（但条目主体不同）。例如：

        ```xml
        <lexicon>
            <ar>
                <k>disc</k>
                <k>disk</k>
                <def cmt="存储信息的设备">
                    <deftext>......</deftext>
                </def>
            </ar>
            <ar>
                <k>disc</k>
                <def cmt="圆形物体">
                    <deftext>......</deftext>
                </def>
            </ar>
        </lexicon>
        ```
        此外，`<sup>`和`<sub>`标签在`<k>`中也被允许。
        * `<opt>` 标记关键短语的可选部分。字典通过`<k>`内容搜索条目，而不包含`<opt>`内容，但在条目中显示。
    2. `<def>` 此标签包含整个单词条目的主体（在`<ar>`内），或定义本身或属于某一类别的一组定义。
        *提示*：这些类别可以是不同的词性，或者具有不同的词源，例如，或相同的意思，但具有不同的内涵。
        请注意，`<def>`标签可以相互嵌套（通常是这样），除非条目非常简单，如“1字翻译成1字”。请查看一些示例[这里](https://github.com/soshial/xdxf_makedict/issues/37)。
        主要的`<def>`标签必须在`<ar>`内，即使条目很简单，没有内容需要分组。`<deftext>`标签包含实际的文本定义。
        \*它们可以有一个`cmt`（注释）属性，用于帮助区分一个定义与其他定义。
        \*它们可以有一个唯一的小写字母数字`id`属性[01-9a-z]，可以从其他条目引用。
        \*它们可以有一个整数/浮动属性`freq`：某个定义的绝对或相对频率值。

        DS应通过缩进、字体大小或以‘1）’、‘2）’...或1.‘、2.’...或'A.'、'B.'...等编号定义的方式，为了视觉上区分一个定义与另一个定义。请考虑查看示例或DTD架构，以更好地理解结构。
        1. `<gr>` 指定有关单词的语法信息。可能包含不同的单词形式、单词用法、语法标签和其他信息。
        2. `<tr>` 标记转录/发音信息；IPA符号是默认值。
            也可能带有值为“X-SAMPA”或“erkIPA”的“format”属性。
        3. `<kref>` 是对同一字典文件中某个`<ar>`或`<def>`的引用。链接应为可点击的。示例：
            * 代码`<kref>answer</kref>`将链接到具有`<k>answer</k>`的条目。
            * 如果`<kref>`具有`idref`属性，则引用标记`<def>`，其`id`等于该属性。代码`<kref idref="nf0837glo9">answered</kref>`中的单词“answered”将链接到动词“answer”（而不是名词，因为特定的`id`）。

            有关附加属性和用法，请参见`<sr>`。
        4. `<dtrn>`此标签标记关键短语的*直接翻译*（通常不用于解释字典）。但在非单语字典中，这个标签应该用来帮助字典软件自动提取关键短语的主要和最简单的翻译——这可能对很有用：
            * 自动提取工具提示翻译的数据（例如，[像qDictionary](http://www.cgliberty.com/articles/software/dictionaries/translite.jpg)）
            * 使`<dtrn>`在单词列表中可见，以避免过于频繁的“完整文章”查找（[示例](https://github.com/soshial/xdxf_makedict/wiki/Why-is-XDXF-better%3F)）

            *提示*：这些单词应突出显示，便于查看条目（通常这些单词以粗体显示，有时也以深橙色显示）。这些单词也可能被自动视为链接（`<kref>`），指向对方语言对的文章（如果在第二个字典中存在）。
        5. `<rref>` 对资源文件（音频、视频、GIF、图像文件）的引用，应位于与字典文件相同文件夹或任何子文件夹中。
            * `lctn`（资源的物理地址）放在`<rref>`标签内。
            * `type`属性指定资源文件的MIME类型。
            * 可选的`start`和`size`属性对于音频和视频文件是必要的，当引用指向文件的某一部分时。将所有字典的音频数据保存在一个文件中，并从文章中引用不同部分是非常方便的。属性`start`指定偏移量：感兴趣块的第一字节的位置，而`size`指定其长度（以字节为单位）。如果省略“start”属性，假设其值为0；如果省略`size`属性，假设文件将播放到结束。

            用法：`<rref lctn="audio.ogg" type="audio/opus" start="xxx" size="xxx">爬行</rref>`或仅`<rref lctn="audio/transcription1.mp3"/>`
        6. `<iref href="http://www.somewebsite.com">描述</iref>` 对外部在线资源的引用。保留协议（“<http://>”、“<https://>”等）是强制性的。
        7. `<abbr>`标签标记缩写标签。请注意，出现的标签应在`<abbreviations>`部分的相应`<abbr_k>`标签中列出解释。
        8. `<c c="#xxxxxx">...</c>` （“xxxxxx”代表6位十六进制颜色代码）。标记具有给定颜色的文本。
            “c”属性的语法与HTML中“font”标签的“color”属性相同。
            如果颜色属性被省略，则隐含使用默认颜色。默认颜色由DS选择。
        9. `<ex>` 标记示例的文本（通常由DS以灰色或其他颜色显示）。
            *提示*（索引）：示例通常应按默认索引，用户应能够配置是否希望示例被索引和搜索。
            属性`type`可能是：
            * `exm` - 常见示例，可以或不可以翻译
            * `phr` - 可以包含任何类型的短语（成语、搭配、陈词滥调等）
            * `prv` - 谚语
            * `oth` - 其他

            属性`source`和`author`指定示例的来源。

            `<ex>`标签可能包含以下标签：
            * `<ex_orig>`是示例的原始短语（数量：1或多个）。
            * `<ex_tran>`是可选的；可以有多个翻译（数量：0或多个）。
            * 在之前的两个标签中，可能包含有用的`<mrkd>`标签。它们用于标记原始短语和翻译中条目的主要单词（[来自维基词典的示例](https://github.com/soshial/xdxf_makedict/raw/master/format_standard/images/mrkd_tag_in_examples.png)）。
            * `<iref>`可能包含对外部资源的链接。
        10. `<co>` 标记编辑评论的文本，以阐明意义或上下文（根据`type`在程序中显示不同颜色）。`type`属性指定它是什么类型的评论：语法、风格、用法等，任何不适合放入相应部分的内容。
            *提示*（索引）：评论通常被索引。
        11. `<sr>`是一个部分，专门用于与其他单词之间的语义关系，例如同义词、整体词、上位词等。
            它使用带有`type`属性的`<kref>`与其他单词和定义相关联。可能的`type`值有：
            * `syn`和`ant` — 同义词和反义词
            * `hpr`和`hpn` — 上位词和下位词（包括[接动词](http://en.wikipedia.org/wiki/Troponymy)）
            * `par`和`spv` — 同源词和拼写变体
            * `mer`和`hol` — 部分词和整体词
            * `ent` — 包含，特殊动词类别：X使Y含义成立，如果做X则必须做Y
                对于名词也可以使用这种方式：做、拥有或成为这个名词必然伴随某种结果
                （做“重罪”必然伴随成为“罪犯”）
            * `rel` — 表示相关性（例如，“英俊”和“丑陋”与“外貌”相关）

            `kcmt`属性用于指定该单词与我们之间的关系程度或指定该单词的附加信息（例如性别或格）。
            以下是“旅行者”的`<sr>`部分的示例：
            ```xml
            <sr>
                <kref type="spv" idref="35fo86fdr">traveler</kref>
                <kref type="rel" kcmt="部分">tourist</kref>
                <kref type="syn" idref="pu4o202oi"><abbr>过时</abbr>voyager</kref>
            </sr>
            ```
        12. `<etm>` 单词的词源信息。`<etm>`可以包含`<mrkd>`标签，以标记关键字的词源祖先或同源词。
        13. `<di>` 标记应被索引的`<def>`文本部分。可能仅在`<def>`及其某些儿子标签中使用：`<co>`、`<ex>`、`<etm>`、`<phr>`
        14. `<categ>`标签在某种程度上相当于维基词典类别（例如，“审讯”可能有“中世纪历史”类别，或“国际象棋”有“多数词”类别）。所有类别仅仅是带有`idref`属性的`<kref>`标签，指向已创建的条目，这些条目有一些说明。DS必须创建所有文章列表与相应类别的链接。
        15. 所有样式标签`<sup>`、`<sub>`、`<i>`、`<b>`、`<u>`用于文本的表示。`<br/>`标签用于换行。除了这个标签之外的其他换行空间将被忽略。

## 示例：

有关示例，请参见https://github.com/soshial/xdxf_makedict/master/sample-dicts/.

[GPT-4o mini]

