# [脚注、尾注、侧注和弹出注释](https://www.publisha.org/pages/footnotes/)

我引用罗伯特·布林赫斯特在《排版风格元素》中的话[^1]：

> …将注释放置在页面底部或书籍末尾的学术习惯，反映了维多利亚时代的社会与家庭实践，在这种实践中，厨房被隐藏而佣人则被安置在楼下。如果注释能够像文艺复兴时期的书籍那样在边缘自由移动，它们就能够在需要的地方出现，同时丰富页面的内容。

在《排版风格元素》中，注释被放置在侧边边距，这样信息就可以靠近甚至紧挨着文本中的引用。罗伯特·布林赫斯特不需要在那些小的上标数字上费心，因为补充信息总是在附近，方便读者。

然而，传统规定某些书籍使用脚注，而有些书籍则使用尾注（无论是在章节末尾还是书籍末尾）。如果有空间，将注释放在侧边边距是很好的。老实说，书籍设计和可用性在商业考虑面前往往不占优势。罗伯特·布林赫斯特的书是一个例外，它是一个美丽的作品，给了文本足够的空间去呼吸。

我多么讨厌那些给我不到一厘米边距的书籍。

## 脚注

这些需要与主文本分开，并且最好使用较小的字号，甚至可能使用不同的字体和颜色。注释的目的在于提供补充信息，读者完全可以选择是否查看，因此以不干扰阅读体验流畅性的样式设置是非常重要的。

![这里我们看到章节中第一个脚注的示例以及文本中的引用编号。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_01.webp)  
这里我们看到章节中第一个脚注的示例以及文本中的引用编号。

脚注最好用悬挂数字编号，尽管（出于技术原因）这些数字通常对齐主文本块。这些数字对应于文本中上标的数字。大多数出版商会倾向于每个章节重新开始编号，否则编号可能会变得不堪重负（超过两个数字的上标可能看起来很丑）。如果文本中的引用很少，可以用符号替代数字（\* 或 †, ‡, §, ‖,¶）。

列出的脚注最好与主体部分用一条部分线分隔开；这给读者一个强烈的暗示，指明这些注释并不是直接跟随上面的文本。当脚注较长时，可以跨页拆分，尽管这会在一定程度上妨碍可用性。

## 尾注

注释通常放在章节末尾或书籍末尾（在索引之前）。这种方法意味着读者需要“寻找”文本中提到的注释。

这通常意味着尾注将根据章节或部分组织。

尾注相对于脚注的优点在于，垂直页面的排版不会因为注释空间而受到影响。

如果文本中有很多引用，这必须是最佳的选择。

可笑的是，我们见过一些脚注所占页数竟然比主文本本身还多！

## 侧注（有时称为边注）

显然，页面布局需要在边距中提供空间，以便这成为一个选项。除非这是一本大开本书籍，否则注释（文本的宽度）的宽度可能会很窄，因此如果注释很长或有很多，且书籍较小，就不要为此设计选项[^2]。

**侧注** 位于文本块之外，而脚注是在文本块内。

如果侧注明显指向的内容，侧注并不一定需要文本中的上标数字（而且它们自身也不需要编号）。

## 使用InDesign的脚注

**InDesign**将帮助我们构建脚注，软件甚至可以从Microsoft Word导入脚注。InDesign用户有自己专用的配置面板，如图所示。在这里，我们可以设置引用在文本中的显示方式（上标等）以及脚注如何在页面底部出现。我们需要设置段落样式来显示脚注本身，我们也可以（可选地）为文本中引用的数字使用字符样式。

![用于控制脚注显示的InDesign对话框](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_02.webp)  
用于控制脚注显示的InDesign对话框

从第一个示例页面中，你会看到脚注列表的数字左对齐文本框的边缘。你常常会在书架上的书中看到这种情况，然而，更美观的排列是将这些列出的数字“悬挂”，这样脚注对齐文本，而数字则与文本框错开。

![脚注布局通过第二个选项卡进行控制](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_03.webp)  
脚注布局通过第二个选项卡进行控制

InDesign **不提供**设置脚注在文本框外部的手段，因此我们需要通过将文本框内部的所有文本缩进一个金额来进行规划，然后从左边距中去掉这个金额。这样，我们就可以将脚注数字悬挂。你会从这里提供的图像中看到，我们正在使用辅助线确保这些项目对齐。我的脚注样式将数字偏移了4毫米，而我的段落样式使用了4毫米的缩进。

![在InDesign中我们看到页面的放大。数字现在从正文左边缘悬挂了出来](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_04.webp)  
在InDesign中我们看到页面的放大。数字现在从正文左边缘悬挂了出来

你会注意到没有选项将这些脚注转化为尾注；为此我们需要一个脚本。

## 使用脚本创建尾注

为此，我们需要转向[彼得·卡赫雷尔](http://www.kahrel.plus.com/indesign/footnotes.html "查看此网站以获得InDesign脚本")，他提供了许多有用的脚本。我在这里使用的脚本称为“将脚注转换为（动态）尾注”，这意味着如果添加更多注释，编号将会更改。

使用脚本修改内容时，始终先保存你的工作！脚本通常会经过一系列长的操作；你可以随时使用“恢复”（从文件菜单）返回到先前状态。

你会在这里看到，尾注有自己的页面，具有与其他标题样式匹配的标题。你可能需要调整注释及其列出数字的段落样式。

![章节末尾的尾注。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_05.webp)  
章节末尾的尾注。

## 使用脚本创建侧注

同样，彼得·卡赫雷尔将帮助我们（请在他的网站上捐款）提供一组脚本。使用这些脚本，我们可以在转换脚注为侧注时控制宽度和位置。每个注释都有自己的文本框，在引用点锚定。你会在这里给出的示例页面中看到我已经关闭了编号。这是在脚本对话框中的一个选项。可能还需要在引用彼此接近时垂直移动文本框；某种程度的手工调整是必需的[^3]。

![一个包含侧注的页面。你会看到文本对齐（左或右），取决于直书或反书，通过段落样式使用“朝向脊椎”实现。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_06.webp)  
一个包含侧注的页面。你会看到文本对齐（左或右），取决于直书或反书，通过段落样式使用“朝向脊椎”实现。

## 电子书中的注释

脚注对于可重排电子书没有任何用处！你实际上没有页面底部。根据书籍类型、提议的平台以及纸质书到电子书的工作流程，有多种选择。

### 对于可重排电子书

当你从InDesign导出到ePub（可重排）时，你有一个选项可以将你的_脚注_转换为弹出注释。这将把注释从页面底部包装在HTML标签`<aside>`中，并在XHTML代码中添加必要的ePub3类。事实上，你还会在带超链接的数字中得到一个属性：

`epub:type="noteref"`

然后脚注引用将被包装在`<aside>`标签中。

![在Mac上使用Apple iBooks的弹出注释](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_07.webp)  
在Mac上使用Apple iBooks的弹出注释

### 适合手指的超链接

你可能会发现，移除上标引用号码（在书籍设计中传统的做法）并将整行变成一个超链接，可以改善可用性。

因此，而不是这样：

```
<p>为了死亡，或为了单身生活的誓言。<a href=""><span class="reference">1</span></a></p>
```

我们这样做：

```
<p><a class=reference epub:type="noteref" href="dream-116.xhtml#footnote-002">为了死亡，或为了单身生活的誓言。</a></p>
```

通过对引用类的超链接进一步调整`CSS`，我们可以看到效果。

![超链接现在来自文本而不是仅仅一个参考数字](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_08.webp)  
超链接现在来自文本而不是仅仅一个参考数字

这确实比我们原来的上标数字要好得多。我们所做的这一点同样适用于可重排的ePUB3格式。

> **注意：** 当前不可能修改Apple iBooks中的弹出文本的样式。

在其他电子阅读器，例如Adobe Digital Editions中，超链接按预期工作，将读者带到注释页面。

弹出注释引用在Apple的iBooks应用程序中得到了支持，适用于Mac和iOS平板等设备。它还被[记录](https://github.com/kobolabs/epub-spec#footnotesendnotes-are-fully-supported-across-kobo-platforms)，后来Kobo设备也支持弹出注释。

在将电子书转换为MOBI格式的Kindle的后续型号中也得到了支持。

其他无法支持弹出注释的设备和软件将仅作为超链接到章节或部分末尾的注释列表功能。但InDesign没有为我们提供帮助，因为注释列表失去了编号，反向链接也无法工作。

我们该如何解决这个问题？

### 修复所有系统的ePUB脚注

解决反向链接问题可以通过两种方式进行：

我们可以将InDesign导出为弹出注释，然后对ePub文件进行后期编辑，通过在注释列表中添加数字。你会发现XHTML标记看起来大致如下：

```
<aside id="footnote-003"class="_idFootnote" epub:type="footnote"> <p class="footnotes"><a class="_idFootnoteAnchor_idGenColorInherit" href="introduction.xhtml#footnote-003-backlink"></a>
	约翰·莎士比亚的父亲理查德·莎士比亚是一个佃农，在1550年出租了他的农场，位于斯特拉特福德北四英里处的斯尼特菲尔德，由另一个农民罗伯特·阿登租赁。</p>
</aside>
```

如果你仔细查看，你会看到链接标签在内容之前结束。它应该包裹数字。我们可以在`</a>`之前添加数字，但这不是一个带项目符号的列表，因此我们还需要一个空格。这是一个解决方案，尽管如果你有很多脚注，这可能会是一项相当繁琐的任务。

**这里还有另一种方法**

与其从InDesign导出弹出注释选项，不如选择“章节末尾（尾注）”选项。这将正常工作于不支持弹出注释的系统。在iBooks（Apple系统）中，超链接数字将指向章节末尾的注释部分。如果我们想要使弹出注释在支持的系统上工作，我们需要打开ePUB并进行一些修改。

#### 从尾注版本编辑ePUB

一旦你解压了ePUB（实际上我更喜欢使用BBedit，无需解压），你可以搜索：

`<a class="_idFootnoteLink`

并将其替换为：

`<a epub:type="noteref"class="_idFootnoteLink`

如果你这样做，弹出注释将起作用，但你也会发现注释仍会列在章节末尾。就我个人而言，我更喜欢这样，因为我们可以再次阅读这些注释。

![显示弹出注释和章节末尾注释列表。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_09.webp)  
显示弹出注释和章节末尾注释列表。

如果你**不**希望看到这个注释列表，那么你需要将每个注释包裹在`<aside>`标签中，我们可以通过搜索和替换来做到这一点，但这次使用GREP。

GREP找到这个：

`<div( id="footnote-.+\s+.+\s+)</div>`

并替换为

`<aside\1</aside>`

你可能还想移除注释列表上方的水平线`<hr>`。

## 固定布局电子书的注释

如果你是InDesign CC用户，计划导出固定布局ePUB，并且文档中有脚注，你可能会失望地注意到没有选项将这些脚注转换为使用ePUB3标准的弹出注释。

在导出到ePUB（可重排）选项中，我们可以选择弹出类型，但对于固定布局则不行。你的脚注将保留在页面的确切位置。令人失望，不是吗？

InDesign将期待脚注在与其引用相同的XHTML文件中。然而InDesign中存在一些设置，但没有任何能帮助我们转换为仅在弹出中显示的隐形注释。

我们等待Adobe发布另一个版本的InDesign时有什么解决方案吗？

### 移动脚注

我们需要将引用从页面底部移到书籍末尾的单独页面。

![这些注释位于电子书末尾自己的标题下，并且也能作为弹出注释功能。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_10.png)  
这些注释位于电子书末尾自己的标题下，并且也能作为弹出注释功能。

InDesign没有任何配置提供这一点，因此我们需要使用脚本。彼得·卡赫雷尔提供了一个可用的脚本。在他的网站上，他也给其他人致谢，但你需要的是那个叫“脚注转尾注”的脚本。[你可以在这里下载](http://www.kahrel.plus.com/indesign/footnotes.html "感谢彼得·卡赫雷尔")。

### 在文本中找到引用

如果你在`HTML`标记中找到你的一个引用，你会发现一个空的超链接，且没有提到ePUB3格式所需的正确`epub:type`。

我们需要查看ePUB中的最后一页，以添加正确的ePUB3信号以获得正确的消息！

因此，在最后一页我们需要查看目标引用，当我们发现这个时：

```
<li class="footnotes-numbered"><a id="_idTextAnchor032"></a>
```

我们需要在列表项中添加`<aside>`块，像这样：

```
<li class="footnotes-numbered"><a id="_idTextAnchor032"></a> <aside id="footnote-001" epub:type="footnote">
```

不要忘记在`</li>`之前关闭`<aside>`标签。

你需要将所有引用编号为footnote-001，footnote-002等。我还不知如何轻松做到这一点。

下一步是找到文本中超链接引用。如果你从InDesign正确导出可靠的标签名称，那么你可以使用编辑器（我用Atom）搜索

`<span class="reference`

我们现在需要逐一遍历此标记，并添加以下内容：

`<a epub:type="noteref" href="dream-116.xhtml#footnote-001">`

替换空的`<a>`标签。

脚注引用有一个数字；你需要相应地增加这个数字。

### Kindle的脚注

一些Kindle（Paperwhite）现在支持弹出注释（尽管这并不是一个确切的浮动窗口），但是在我写作时，如果你使用InDesign并选择将脚注转换为弹出注释，则不会在Kindle获得弹出注释。你将会得到指向章节末尾引用的链接，而且这些数字也消失了。

这是一个需要针对Kindle稍微修改的电子书版本的情况。

我们不能结束这篇文章而不提到_iBooks Author_。

iBooks Author是苹果公司为iOS设计的免费软件，旨在创建“多点触摸”电子书。你可以在这里阅读更多关于使用该软件的信息 [这里](https://www.publisha.org/pages/iBooksAuthor/ "此页面将提供帮助")，但关于添加注释；你需要熟悉词汇表功能，它允许直接输入文本（和图像）以提供弹出参考。

![这里我们看到的词汇表条目变成了一个弹出](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_11.webp)  
这里我们看到词汇表条目变成了一个弹出

词汇表条目以弹出框的形式提供文本，可以进行样式设置。创建词汇表条目后，可以对同一词汇表条目进行其他引用。

![这个词汇表条目很长，所以出现了滚动条。](https://scillidan.github.io/image_post/footnotes-endnotes-sidenotes-and-popup-notes_12.webp)  
这个词汇表条目很长，所以出现了滚动条。

[^1]: 《排版风格元素》，罗伯特·布林赫斯特著，哈特利与马克斯出版公司，2012年
[^2]: 见爱德华·塔夫特和[关于侧注的这篇讨论](http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0000ld)
[^3]: 如果你使用此处提到的脚本将注释放在边缘或章节或书籍末尾，那么你在可重排电子书中将无法使用弹出注释。

[GPT-4o mini]

